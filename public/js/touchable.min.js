(function(e,t,n){function r(n,s){if(!t[n]){if(!e[n]){var o=typeof require=="function"&&require;if(!s&&o)return o(n,!0);if(i)return i(n,!0);throw new Error("Cannot find module '"+n+"'")}var u=t[n]={exports:{}};e[n][0](function(t){var i=e[n][1][t];return r(i?i:t)},u,u.exports)}return t[n].exports}var i=typeof require=="function"&&require;for(var s=0;s<n.length;s++)r(n[s]);return r})({1:[function(e,t,n){(function(n){e("./basic"),e("./gestures"),e("./info"),e("./simulation"),t.exports=n.Touchable})(window)},{"./basic":2,"./gestures":3,"./info":4,"./simulation":5}],2:[function(e,t,n){(function(n){var r=e("./dep/modernizr.shim"),i=e("./dep/lodash.shim"),s=e("./ext"),o=function(e,t){return new o.Instance(e,t||{})};o.Instance=function(e,t){if(!e)return console.log("INVALID ELEMENT",e),!1;if(e.element)return console.trace(),console.log("ALREADY INIITALIZED"),e;e.jquery&&(e=e.get()),this.elements=i.isArray(e)?e:[e],this.element=this.elements[0],this.options=t||{}},o.Instance.prototype={getGestureData:function(){return s.Element.retrieve(this.element,"gestureData",{})},getTouches:function(e){if(e){var t=[],n=[this.element].concat(this.element.getAllChildren());return n.forEach(function(e){var n=e.retrieve("touches",[]);n.length>0&&(t=t.concat(n))}),t}return s.Element.retrieve(this.element,"touches",[])},removeTouchGesture:function(e,t,n){var r=s.Element.retrieve(this.element,"storedGestures",{}),o=[];if(e&&t){r[e]?(r[e].forEach(function(e){e.remove==t.removeListeners?e.remove():o.push(e)}),r[e]=o):console.log(e,"WONT BE REMOVE CAUSE ITS NOT REGISTERED");return}if(!e){i.forOwn(r,function(e,t){e.forEach(function(e){e.remove()}),delete r[t]});return}if(!t){var u;(u=r[e])?(u.forEach(function(e){!n||e.id==n?e.remove():o.push(e)}),r[e]=o):console.error(e,"WONT BE REMOVE CAUSE ITS NOT REGISTERED");return}console.error("GESTURE",e,"IS UNKNOWN")},enableTouchGesture:function(e){var t=s.Element.retrieve(this.element,"storedGestures",{})[e];t&&t.forEach(function(e){e.enable()})},disableTouchGesture:function(e){var t=s.Element.retrieve(this.element,"storedGestures",{})[e];t&&t.forEach(function(e){e.disable()})},on:function(e){var t=this,n=arguments,r=i.isArray(e)?e:e.split(" "),s=function(n){var r=o.Gestures[e];if(r)return t.addTouchGesture.apply(t,arguments);if(!e||["touchstart","touchmove","touchend"].indexOf(e)!=-1)return t.addTouchEvent.apply(t,arguments);console.log(e,"IS UNKNOWN")};return i.isObject(e)?i.forOwn(e,function(e,t){s(t,e)}):s.apply(this,arguments),this},pause:function(){return this.disableTouchGesture.apply(this,arguments)},resume:function(){return this.enableTouchGesture.apply(this,arguments)},off:function(e){var t=this,n=function(n){var r=o.Gestures[e];if(r)return t.removeTouchGesture.apply(t,arguments);if(!e||["touchstart","touchmove","touchend"].indexOf(e)!=-1)return t.removeTouchEvent.apply(t,arguments);console.log(e,"IS UNKNOWN")};if(!i.isObject(e))return n.apply(this,arguments);i.forOwn(e,function(e,t){return n(t,e)})},addTouchGesture:function(e,t,n){t=t||{},n=n||{},n.active=n.active!==undefined?n.active:!0;var r=o.Gestures[e];if(!r){console.log("GESTURE",e,"IS UNKNOWN");return}var u=s.Element.retrieve(this.element,"storedGestures",{}),a=s.Element.retrieve(this.element,"activeGestures",{}),f=r(t,this,n)||{};this.addMultiTouch(f,n);if(!t.removeListeners&&!f.removeListeners)console.log("ADD TOUCH GESTURE",e,"HAS NO REMOVE OPTION");else if(t.removeListeners){var l=t.removeListeners;t.removeListeners=function(){l(),f.removeListeners()}}else t.removeListeners=f.removeListeners;u[e]=u[e]||[],n.id=n.id||s.Math.getUUID();var c=this;n.progress=function(t){if(t)a[e]=a[e]||[],i.include(a[e],n.id);else{var r=a[e];r&&(i.erase(r,n.id),r.length===0&&delete a[e])}},u[e].push({id:n.id,callback:t,events:f,options:n,remove:t.removeListeners,enable:function(){n.active=!0},disable:function(){n.active=!1}})},addTouchEvent:function(e,t,n){if(!i.contains(["touchstart","touchmove","touchend"],e)){console.log("ADD TOUCH EVENT IS A PRIMITIVE FOR TOUCHSTART,TOUCHMOVE,TOUCHEND, FOR ALL OTHER; PLEASE USE ADDTOUCHGESTURE"),console.trace();return}if(!t){console.trace(),console.log("UNABLE TO ADDTOUCHEVENT WITHOUT CALLBACK");return}var r=this.element,u=o.Gestures[e];if(u){this.addTouchGesture(e,t,n);return}r.style["-ms-touch-action"]="none";var a=function(e,t,n){if(!n){console.log("UNABLE TO HANDLEVENT WITHOUT CALLBACK");return}var i=t.identifier||t.streamId||t.pointerId;i===undefined&&(i="MOUSE");var s={from:t.relatedTarget||t.toElement,stopped:t.stopped||!1,identifier:i,type:t.type,target:t.target||t.srcElement,listenerTarget:r,currentTarget:t.currentTarget||t.srcElement,pageX:t.pageX,pageY:t.pageY,preventDefault:function(){t.preventDefault&&t.preventDefault()},origType:e};s.x=s.clientX=s.pageX=s.pageX===undefined&&t.clientX!==undefined?t.clientX:s.pageX,s.y=s.clientY=s.pageY=s.pageY===undefined&&t.clientY!==undefined?t.clientY:s.pageY;if(s.target){var u=s.target;while(u&&(u.style["pointer-events"]=="none"||u.style.display=="none"))u=u.parentNode;s.target!=u&&(s.target=u),s.target.forwardTouchesTo&&(s.forwardedBy=s.target,s.target=s.target.forwardTouchesTo)}s.stopPropagation=function(){s.stopped||(s.stopped=t.stopped=t.cancelBubble=!0)},o.prepareEvent(s);var a=o.touches[s.identifier];return!a&&e=="touchstart"&&(a=o.TouchCemetery.shift(),a?a.reset(s):a=new o.Touch(s)),s.touch=a?a:{data:{}},a&&(e=="touchmove"&&a.touchmove(s),e=="touchend"&&a.touchend(s)),n(s),s.stopped},f=function(t,n,r){if(!r)return!1;r.wrappers=r.wrappers||{};var i=function(t){if(!t.changedTouches)return a(e,t,r);var n=function(){t.stopPropagation()},i=function(){t.preventDefault()};for(var s=0;s<t.changedTouches.length;s++){var o=t.changedTouches[s];o.stopPropagation=n,o.preventDefault=i,o.type=t.type,o.identifier=o.identifier||t.identifier,o.currentTarget=o.currentTarget||t.currentTarget,a(e,o,r)}};r.wrappers[n]=i,s.Element.addListener(t,n,i)};e=="touchstart"&&r.addEventListener&&(r.draggable=!1);if(!o.BrowserEventMappings[e]){console.log(e,"IS UNKNNOWN");return}o.BrowserEventMappings[e].forEach(function(e){o.nativeTouchSupport&&e.indexOf("mouse")>=0||f(r,e,t)});var l=s.Element.retrieve(r,"touchListeners",{});return l[e]=l[e]||[],l[e].push(t),r},addTouchEvents:function(e){var t=this;return i.forOwn(e,function(e,n){t.addTouchEvent(n,e)}),this},addTouchGestures:function(e){var t=this;return i.forOwn(e,function(e,n){t.addTouchGesture(n,e)}),this},removeMultiTouch:function(e){e.removeListeners(),delete e.removeListeners,delete e.onTouches},addMultiTouch:function(e,t){if(!e)return;t=t||{},t.active===undefined&&(t.active=!0),e.touchstart=e.touchstart||function(){},e.touchmove=e.touchmove||function(){},e.touchend=e.touchend||function(){};var n=this.element,r=t.captureOutside===!1?n:o.body.element,i={},s=0,u={touchstart:function(n){if(n.stopped)return;if(!n.identifier)return;if(t.maxNoOfTouches&&s>=t.maxNoOfTouches)return;i[n.identifier]||(s++,i[n.identifier]=!0,!n.stopped&&t.active&&e.touchstart(n))},touchmove:function(n){if(!n.identifier)return;if(!i[n.identifier])return;!n.stopped&&t.active&&e.touchmove(n)},touchend:function(n){console.log("TOUCHEND",n.identifier,n,i[n.identifier]);if(!n.identifier)return;if(!i[n.identifier])return;delete i[n.identifier],s--,!n.stopped&&t.active&&(console.log("REALLY TOUCHEND"),e.touchend(n))}};e.removeListeners=function(){o(n).removeTouchEvent("touchstart",u.touchstart),o(r).removeTouchEvent("touchmove",u.touchmove),o(r).removeTouchEvent("touchend",u.touchend)},e.onTouches=u,o(n).addTouchEvent("touchstart",u.touchstart),o(r).addTouchEvent("touchmove",u.touchmove),o(r).addTouchEvent("touchend",u.touchend)},removeTouchEvent:function(e,t){if(!e)return this.removeTouchEvents();if(!i.contains(["touchstart","touchmove","touchend"],e)){console.log("REMOVE TOUCH EVENT IS ONLY FOR TOUCHSTART, TOUCHMOVE, TOUCHEND, FOR ALL OTHERS, USE REMOVE TOUCH GESTURE");return}if(!t||!t.wrappers)return this.removeTouchEvents([e]);var n=this.element;o.BrowserEventMappings[e].forEach(function(e){s.Element.removeListener(n,e,t.wrappers[e])})},removeTouchEvents:function(e){var t=this,n=this.element,r=s.Element.retrieve(n,"touchListeners",{});if(!e)return i.forOwn(r,function(e,n){e.forEach(function(e){t.removeTouchEvent(n,e)})}),this;if(i.isArray(e))return e.forEach(function(e){r[e].forEach(function(n){t.removeTouchEvent(e,n)})}),this},hasActiveGesture:function(e){var t=s.Element.retrieve(this.element,"activeGestures",{});return e?t[e]:Object.keys(t).length>0}},o.Gestures={},i.merge(o,{dependencies:{basics:!1,gestures:!1},BrowserEventMappings:{touchstart:["touchstart","MozTouchDown","MSPointerDown","mousedown"],touchmove:["touchmove","MozTouchMove","MSPointerMove","mousemove"],touchend:["touchend","touchcancel","MozTouchUp","MSPointerUp","mouseup"]},nativeTouchSupport:!1,options:{doTouchesIndicators:!1,TUIO:!1},tuio:{active:!1},releaseCandidates:{},touches:{},highestZ:99,states:{},events:{touchmove:function(e){},touchend:function(e){i.delay(function(){e.origType=="touchend"&&e.touch&&e.touch.kill&&e.touch.kill()},10)}},on:function(e,t){o.states[e]=o.states[e]||{callbacks:[],finished:!1};if(!o.states[e].finished)o.states[e].callbacks.push(t);else{var n=window.jQuery!==undefined?window.jQuery:o;t(n,s,i)}},is:function(e){o.states[e]=o.states[e]||{callbacks:[],finished:!0};var t=window.jQuery!==undefined?window.jQuery:o;while(callback=o.states[e].callbacks.shift())callback(t,s,i);o.states[e].finished=!0},loaded:function(e){o.dependencies[e]=!0;var t=!1;i.forOwn(o.dependencies,function(e,n){e||(t=!0)}),t||o.is("ready")},prepareEvent:function(e){if(e.origType!="touchmove"){var t=["A","INPUT","TEXTAREA","SELECT","BUTTON","EMBED","IFRAME"];if(e.target){var n=2,r=e.target;while(n--&&r){if(r.tagName&&i.contains(t,r.tagName.toUpperCase()))return curelement=!1,e;r=r.parentNode}}}},init:function(e){if(o.initialized)return;o.initialized=!0,o.nativeTouchSupport=r.touch=window.navigator.msPointerEnabled?!0:r.touch,r.csstransforms3d=r.csstransforms3d||s.Element.transformStyleKeys.transform=="webkitTransform",document.multitouchData=!0;if(window.jQuery){var t=["addTouchEvent","addTouchEvents","addTouchGesture","addTouchGestures"];t.forEach(function(e){window.jQuery.fn[e]=function(){var t=Array.prototype.slice.call(arguments,0);return this.each(function(){var n=this,r=o(n);return r[e].apply(r,t)})}})}o.loaded("basics")},TouchPrototype:{data:{},pathHistory:[],states:{DOWN:0,MOVE:1,END:2},touchmove:function(e){this.update(o.TouchPrototype.states.MOVE,e)},touchend:function(e){if(this.state==o.TouchPrototype.states.END)return;if(this.element){var t=[],n=s.Element.retrieve(this.element,"touches",[]),r=this.identifier;n.forEach(function(e){e.identifier!=r&&t.push(e)}),s.Element.store(this.element,"touches",t)}this.update(o.TouchPrototype.states.END,e)},kill:function(e){o.touches[this.identifier]&&(delete o.touches[this.identifier],o.TouchCemetery.push(this),this.afterKill&&this.afterKill()),o.options.doTouchesIndicators&&o.touchesActiveIndicators[this.identifier]&&(o.touchesActiveIndicators[this.identifier].style.display="none",o.touchesIndicators.push(o.touchesActiveIndicators[this.identifier]),delete o.touchesActiveIndicators[this.identifier])},update:function(e,t){this.state=e,this.event=t,t.touch=this,this.updateCoordinates();var n=+(new Date);this.age=n-this.birthdate;if(this.pathHistory.length===0||n>i.last(this.pathHistory).date){var r={x:this.coordinates.x,y:this.coordinates.y,date:n};this.deltaToLast=this.pathHistory.length>0?s.Math.delta(i.last(this.pathHistory),r):{x:0,y:0},this.pathHistory.push(r)}this.state==o.TouchPrototype.states.DOWN&&this.updateElements(),this.updateDistance(),this.updateTouchIndicators()},getCoordinates:function(){return{startCoordinates:this.startCoordinates,coordinates:this.coordinates}},getRelativeCoordinates:function(e){var t=s.Element.getNestedTransformStyleMatrix(e||this.element,!1,!0).inverse(),n={identifier:this.identifier,startCoordinates:t.multPoint(this.startCoordinates.x,this.startCoordinates.y,0),coordinates:t.multPoint(this.coordinates.x,this.coordinates.y,0),absolute:{startCoordinates:this.startCoordinates,coordinates:this.coordinates}};n.delta=s.Math.delta(n.startCoordinates,n.coordinates);var r=n.coordinates;return n.deltaToLast=this.pathHistory.length>1?s.Math.delta(t.multPoint(this.pathHistory[this.pathHistory.length-2].x,this.pathHistory[this.pathHistory.length-2].y,0),n.coordinates):{x:0,y:0},n},resetDelta:function(){return this.startCoordinates=this.coordinates,this.distance=0,this.distanceVector={x:0,y:0},this.deltaToLast={x:0,y:0},this},updateCoordinates:function(){this.coordinates={x:this.event.pageX,y:this.event.pageY}},updateTouchIndicators:function(){if(o.options.doTouchesIndicators){var e=o.touchesActiveIndicators[this.identifier];e||(e=o.touchesActiveIndicators[this.identifier]=o.touchesIndicators.shift(),e?(e.style.display="block",e.children[0].innerHTML=this.identifier):console.log("NOT ENOUGH INDICATORS"));if(e){var t=this.coordinates,n=!0;n?(t=this.getRelativeCoordinates(this.element.parentNode).coordinates,this.element.parentNode.appendChild(e)):o.touchesIndicatorContainer.appendChild(e),s.Element.setTransformStyle(e,{translateX:t.x,translateY:t.y})}}},updateDistance:function(){var e={x:this.coordinates.x-this.startCoordinates.x,y:this.coordinates.y-this.startCoordinates.y};this.distance=Math.sqrt(e.x*e.x+e.y*e.y),this.distanceVector=e},updateElements:function(e){if(this.state!=o.TouchPrototype.states.DOWN)return;var t=this.element!=(e||this.event.target);this.element=e||this.event.target,this.touchedElement=t||!this.touchedElement?o(this.element):this.touchedElement,this.startElement=this.element,this.startCoordinates={x:this.coordinates.x,y:this.coordinates.y};if(this.element){var n=s.Element.retrieve(this.element,"touches");n?n.push(this):s.Element.store(this.element,"touches",[this])}},reset:function(e){this.data={},this.identifier=e.identifier,this.birthdate=+(new Date),this.pathHistory=[],o.touches[e.identifier]=this,this.update(o.TouchPrototype.states.DOWN,e)},getTrendDirection:function(e){var t=+(new Date),n={x:0,y:0},r,i,o,u=0;for(var a=this.pathHistory.length-1;a>0;a--){i=t-this.pathHistory[a].date;if(i>e)break;u++,o=s.Math.limitTo(1-i/e,0,1);var f=this.pathHistory[a].x-this.pathHistory[a-1].x,l=this.pathHistory[a].y-this.pathHistory[a-1].y;n.x+=o*f,n.y+=o*l}return n}},Touch:function(e){this.reset(e)}}),o.Touch.prototype=o.TouchPrototype,o.TouchCemetery=[];var u=function(e){var t=!1,n=function(){if(!document.body)console.log("NOT READY");else{if(t)return;t=!0,e()}};if(/complete|loaded/.test(document.readyState)){n();return}window.addEventListener?(window.addEventListener("DOMContentLoaded",function(){n()},!1),window.addEventListener("load",function(){n()},!1)):window.attachEvent?(window.attachEvent("onreadystatechange",function(e){/complete|loaded/.test(document.readyState)&&n()}),window.attachEvent("onload",function(e){n()})):window.onload&&(window.onload=n)};u(function(){o.body=o(document.body),i.forOwn(o.events,function(e,t){o.body.addTouchEvent(t,e)});var e=function(e){var t=e.relatedTarget||e.toElement;(!t||t.nodeName=="HTML")&&o(document.body).simulate("MOUSE").touchend()};o.nativeTouchSupport||s.Element.addListener(document.body,"mouseout",e),o.init()}),t.exports=n.Touchable=o})(window)},{"./dep/modernizr.shim":6,"./dep/lodash.shim":7,"./ext":8}],3:[function(e,t,n){(function(t){var n=t.Touchable,r=e("./ext"),i=e("./dep/lodash.shim");t.Touchable.relayGesture=function(e,t,r,i){return n.Gestures[e](t,r,i)},n.Gestures={nothing:e("./gestures/empty"),shake:e("./gestures/shake"),tap:e("./gestures/tap"),doubleTap:e("./gestures/doubleTap"),doubleTapToggle:e("./gestures/doubleTapToggle"),toggleTap:e("./gestures/toggleTap"),hold:e("./gestures/hold"),strikethrough:e("./gestures/strikethrough"),swipe:e("./gestures/swipe"),transrotoscale:e("./gestures/transrotoscale"),rotoscale:e("./gestures/rotoscale")},i.forOwn(window.Touchable.Gestures,function(e,t){if(window.jQuery){if(window.jQuery.fn[t]){console.log("Unable to add jQuery-Plugin for "+t+", since $.fn."+t,"is already present, won't be overwritten");return}window.jQuery.fn[t]=function(){var e=Array.prototype.slice.call(arguments,0);return e=[t].concat(e),this.each(function(){var t=this,r=n(t);return r.on.apply(r,e)})}}n.Instance.prototype[t]=function(){var e=Array.prototype.slice.call(arguments,0);return e=[t].concat(e),this.on.apply(this,e)}}),n.loaded("gestures")})(window)},{"./ext":8,"./dep/lodash.shim":7,"./gestures/empty":9,"./gestures/shake":10,"./gestures/tap":11,"./gestures/doubleTap":12,"./gestures/doubleTapToggle":13,"./gestures/toggleTap":14,"./gestures/hold":15,"./gestures/strikethrough":16,"./gestures/swipe":17,"./gestures/transrotoscale":18,"./gestures/rotoscale":19}],4:[function(e,t,n){(function(n){var r=n.Touchable,i=e("./ext"),s=e("./dep/lodash.shim");s.merge(r,{touchesActiveIndicators:{},touchesIndicators:[],infoElement:function(){var e=document.createElement("div");return i.Element.css(e,{display:"none",border:"1px solid white","border-radius":"10px",position:"absolute",width:500,height:300,left:"50%",top:"50%","margin-left":-250,"margin-top":-150,padding:10,color:"#ddd","background-color":"rgba(0,0,0,0.8)","box-shadow":"0px 0px 20px 5px black"}),i.Element.setTransformStyle(e,{scaleX:0,scaleY:0}),e}(),showInfo:function(e){r.infoElement.parentNode!=document.body&&r.infoElement.inject(document.body),s.delay(function(){i.Element.setTransformStyle(r.infoElement,{scaleX:0,scaleY:0}),r.infoElement.innerHTML=e},10)},hideInfo:function(){},enableTouchIndicators:function(){r.touchesIndicatorContainer.style.display="block",r.options.doTouchesIndicators=!0},disableTouchIndicators:function(){r.touchesIndicatorContainer.style.display="none",s.forOwn(r.touchesActiveIndicators,function(e,t){r.touchesIndicators.push(e),delete r.touchesActiveIndicators[t]}),r.options.doTouchesIndicators=!1}}),r.on("ready",function(){r.touchesIndicatorContainer=document.createElement("div"),r.touchesIndicatorContainer.id="touchesContainer",r.touchesIndicatorContainer.style.display="none",r.body.element.appendChild(r.touchesIndicatorContainer);var e=75,t=1;for(var n=0;n<32;n++){var s=document.createElement("div");s.className="touchIndicator",i.Element.css(s,{width:e+"px",height:e+"px",position:"absolute",left:0,top:0,"margin-left":-(e*.5+t)+"px","margin-top":-(e*.5+t)+"px",border:t+"px solid #00baff",borderRadius:e+"px",color:"white",zIndex:777777777,pointerEvents:"none"}),r.touchesIndicatorContainer.appendChild(s);var o=document.createElement("div");o.className="touchIndicatorLabel",s.appendChild(o),r.touchesIndicators.push(s)}}),t.exports=n.Touchable=r})(window)},{"./ext":8,"./dep/lodash.shim":7}],5:[function(e,t,n){var r=window.Touchable,i=e("./ext");e("./dep/async.shim"),r.Instance.prototype.simulate=function(){var e=this,t=this.element,n=[],i=[],s=function(){async.series(n,function(){i.forEach(function(t){e.fireTouchEvent("touchend",{identifier:t})})})},o=!1,u=function(){o=clearTimeout(o),o=_.delay(s,10)},a={then:function(e){return u(),n.push(function(t){e(),t()}),this},delay:function(e){return u(),n.push(function(t){_.delay(t,e)}),this}},f=r.simulateTouchIdentifierOffset,l=0,c=10;return["start","move","end"].forEach(function(t){var s="touch"+t;a[s]=function(o,a){u(),o=o||0,a=a||{},_.isObject(o)&&(a=o,o=0),a.x&&(a.pageX=a.x),a.y&&(a.pageY=a.y),r.simulateTouchIdentifierOffset=Math.max(r.simulateTouchIdentifierOffset,f+o+1);var l={identifier:f+o};return _.merge(l,a),n.push(function(n){t=="start"&&_.include(i,l.identifier),t=="end"&&_.erase(i,l.identifier),e.fireTouchEvent(s,l),_.delay(n,c)}),this}}),a},r.Instance.prototype.fireEventWithBubbles=function(e,t){return self.fireTouchEvent(e,t)},r.Instance.prototype.fireTouchEvent=function(e,t){t=t||{};if(!t.identifier){console.log("UNABLE TO FIRETOUCHEVENT WITHOUT IDENTIFIER");return}t.pageX=t.pageX||0,t.pageY=t.pageY||0,t.target=t.target||this.element;var n=t.target,s=!1,o=function(e){_.forOwn(t,function(t,n){e[n]=t})};while(n){e=="touchstart"&&n.tagName=="INPUT"&&n.focus();var u;document.createEvent?(u=document.createEvent("Events"),u.initEvent(e,!0,!0)):document.createEventObject&&(u=document.createEventObject()),o(u);if(n.dispatchEvent)n.dispatchEvent(u);else{s=!0;var a=i.Element.getId(n);if(i.Element.globalEventData[e]&&i.Element.globalEventData[e][a]){var f=i.Element.globalEventData[e][a];i.Element.globalEventData[e][a].data.push(u),n[e]===undefined&&(n[e]=0),n[e]++}}s?n==r.body.element||u.bubbles===!1||u.cancelBubble?n=!1:n=n.parentNode:n=!1}},r.simulateTouchIdentifierOffset=1e3,t.exports=r},{"./ext":8,"./dep/async.shim":20}],7:[function(e,t,n){t.exports=e("./lodash.own.js")},{"./lodash.own.js":21}],8:[function(e,t,n){(function(n){var r=e("./ext/basic");e("./ext/Math"),e("./ext/Element"),n.__=r,t.exports=r})(this)},{"./ext/basic":22,"./ext/Math":23,"./ext/Element":24}],20:[function(e,t,n){(function(n){e("./async.js"),t.exports=n.async=window.async})(window)},{"./async.js":25}],6:[function(e,t,n){(function(n){"use strict";e("./modernizr.stripped"),t.exports=n.Modernizr=window.Modernizr})(window)},{"./modernizr.stripped":26}],9:[function(e,t,n){var r=e("../basic"),i=function(e,t,n){var r={touchstart:function(e){},touchmove:function(e){},touchend:function(e){}};return r};t.exports=i},{"../basic":2}],10:[function(e,t,n){var r=e("../basic"),i=function(e,t,n){var r=!1,i=0,s=!1,o={tl:!1,br:!1},u=Math.pow(200,2),a={touchstart:function(e){s=!1,r=!1,i=0},touchmove:function(u){if(t.getTouches().length!=1)return;if(s)return;var a=u.touch.coordinates;if(r){o.tl.x=Math.min(o.tl.x,a.x),o.tl.y=Math.min(o.tl.y,a.y),o.br.x=Math.max(o.br.x,a.x),o.br.y=Math.max(o.br.y,a.y);var f=Math.pow(o.br.y-o.tl.y,2)+Math.pow(o.br.x-o.tl.x,2);i+=__.Math.distance(r,a),n.active&&u.touch.age<1e3&&i>200&&i>u.touch.distance*4&&(s=!0,e(u))}else o.tl={x:a.x,y:a.y},o.br={x:a.x,y:a.y};r=a},touchend:function(){}};return a};t.exports=i},{"../basic":2}],11:[function(e,t,n){var r=e("../basic"),i=function(e,t,n){var r={touchend:function(t){t.touch.distance<15&&t.touch.age<500&&e(t)}};return r};t.exports=i},{"../basic":2}],12:[function(e,t,n){var r=e("../basic"),i=function(e,t,n){var i=250,s=0,o=!1,u=function(t){var n=+(new Date),r=n-s,u=o?__.Math.distance(o,t.touch.coordinates):0;o=t.touch.coordinates,s=n,r<i&&u<50&&(s=0,e(t))},a=r.relayGesture("tap",u,t,n);return a};t.exports=i},{"../basic":2}],13:[function(e,t,n){var r=e("../basic"),i=function(e,t,n){var i=!1,s=r.relayGesture("doubleTap",function(t){i=!i,e(t,i)},t,n);return s};t.exports=i},{"../basic":2}],14:[function(e,t,n){var r=e("../basic"),i=function(e,t,n){var i=!1,s=r.relayGesture("tap",function(t){i=!i,e(t,i)},t,n);return s};t.exports=i},{"../basic":2}],15:[function(e,t,n){var r=e("../basic"),i=function(e,t,n){n.duration=n.duration||750,n.maxDistance=n.maxDistance||15;var r,i={touchstart:function(t){r=clearTimeout(r),r=setTimeout(function(){t.touch.distance<n.maxDistance&&e(t)},n.duration)},touchend:function(){r=clearTimeout(r)}};return i};t.exports=i},{"../basic":2}],16:[function(e,t,n){var r=e("../basic"),i=function(e,t,n){var i=1e3;r.globalGestures=r.globalGestures||{};if(!r.globalGestures.strikethrough){var s={};r.globalGestures.strikethrough={registered:[],events:{touchstart:function(e){var t=e.touch.touchedElement.hasActiveGesture();t&&(s[e.identifier]=e.touch.element)},touchend:function(t){var n=s[t.identifier];delete s[t.identifier];var o=t.touch.startCoordinates,u=t.touch.coordinates;if(o===undefined||u===undefined)return;var a=__.Math.delta(o,u),f=__.Math.getAngleToX(a),l=.2*__.Math.getLength(a),c=__.Math.rotate(o,-f).y,h=__.Math.rotate(o,-f).x-5,p=__.Math.rotate(u,-f).x+5;for(var d=0;d<t.touch.pathHistory.length;d++){var v=__.Math.rotate(t.touch.pathHistory[d],-f);if(Math.abs(v.y-c)>l)return;if(v.x<h)return;if(v.x>p)return}r.globalGestures.strikethrough.registered.forEach(function(r){if(!r.elem.element.parentNode){e.removeListeners();return}if(!r.options.active)return;if(r.elem.hasActiveGesture()||n)return;if(t.touch.age>i)return;var s=__.Element.getNestedCorners(r.elem.element);if(__.Math.isPointInPath(o,s)||__.Math.isPointInPath(u,s))return;var a=__.Math.between(s[0],s[2],.5);s.forEach(function(e){__.Math.add_(e,__.Math.scale(__.Math.delta(e,a),.6))}),__.Math.intersectPoly(o,u,s)&&r.callback(t)})}}},r.body.addTouchEvents(r.globalGestures.strikethrough.events)}var o={callback:e,elem:t,options:n};return r.globalGestures.strikethrough.registered.push(o),e.removeListeners=function(){_.erase(r.globalGestures.strikethrough.registered,o)},!1};t.exports=i},{"../basic":2}],17:[function(e,t,n){var r=e("../basic"),i=function(e,t,n){var r={touchend:function(t){var n=!1,r=t.touch.getTrendDirection(500),i=r.y!==0?Math.abs(r.x/r.y):2;__.Math.getLength(r)<10||i<1.1&&i>.9?n=!1:__.Math.getLength(r)>5&&(Math.abs(r.x)>Math.abs(r.y)?n=r.x>0?"right":"left":n=r.y>0?"down":"up"),n&&e(t,n)}};return r};t.exports=i},{"../basic":2}],18:[function(e,t,n){var r=e("../basic"),i=function(e,t,n){n.progress=n.progress||function(){},n.minTouches=n.minTouches||1,e.start=e.start||function(){},e.perform=e.perform||function(){},e.end=e.end||function(){};var i=!1,s=0,o=!1,u=t.element,a=t,f=__.Element.getTransformStyle(u);u.tagName=="IMG"&&(__.Element.ccss(u,"position")=="static"&&(u.style.position="relative"),__.Element.addListener(u,"load",function(){f=__.Element.getTransformStyle(u),i=!1,__.Element.store(u,"transformStyleMatrixDirty",!0),__.Element.store(u,"transformStyleMatrixOriginDirty",!0);var e=__.Element.innerSize(u,!0);u.style.width=e.innerWidth+"px",u.style.height=e.innerHeight+"px"}));var l,c={touchstart:function(t){var o=a.getTouches();if(o.length===0)return;o.length==1&&(__.Element.setTransitionDuration(u,"all",0),r.highestZ=Math.max(parseInt(u.style.zIndex,10)||100,r.highestZ),u.style.zIndex=++r.highestZ,f=__.Element.getTransformStyle(u),n.progress(!0),e.start(t));if(!i){touchA=o[0].getRelativeCoordinates(u.parentNode),i=__.Element.relativePosition(u);var c=parseFloat(__.Element.ccss(u,"width")),h=parseFloat(__.Element.ccss(u,"height")),p=parseFloat(__.Element.ccss(u,"paddingLeft")),d=parseFloat(__.Element.ccss(u,"paddingRight")),v=parseFloat(__.Element.ccss(u,"paddingTop")),m=parseFloat(__.Element.ccss(u,"paddingBottom")),g=parseFloat(__.Element.ccss(u,"borderLeft")),y=parseFloat(__.Element.ccss(u,"borderRight")),b=parseFloat(__.Element.ccss(u,"borderTop")),w=parseFloat(__.Element.ccss(u,"borderBottom"));c+=p+d,h+=v+m,i.x+=g+c*.5,i.y+=b+h*.5}s!=o.length&&(f=__.Element.getTransformStyle(u),o.forEach(function(e){e.resetDelta()}),s=o.length),l={x:f.translateX+i.x,y:f.translateY+i.y};if(r.options.doTouchesIndicators){var E=document.getElementById("centerIndicator");E&&(__.Element.setTransformStyle(E,{translateX:l.x,translateY:l.y}),u.parentNode.appendChild(E))}t.preventDefault()},touchmove:function(t){var r=a.getTouches(),s,o,c={};if(r.length==1){s=r[0].getRelativeCoordinates(u.parentNode);var h=s.delta;c={translateX:f.translateX+(n.fixedX?0:h.x),translateY:f.translateY+(n.fixedY?0:h.y)}}if(r.length>1){l={x:f.translateX+i.x,y:f.translateY+i.y},s=r[0].getRelativeCoordinates(u.parentNode),o=r[1].getRelativeCoordinates(u.parentNode);var p=__.Math.estimateTriangle(s.startCoordinates,o.startCoordinates,l,s.coordinates,o.coordinates);c={translateX:p.center.x-i.x,translateY:p.center.y-i.y,rotateZ:f.rotateZ+__.Math.toDegrees(p.angle)},c.scaleX=c.scaleY=f.scaleX*p.scale}return r.length>0&&(c.translateX=n.fixedX||n.onlyPinch?f.translateX:c.translateX,c.translateY=n.fixedY||n.onlyPinch?f.translateY:c.translateY),n.noTransformSet||__.Element.setTransformStyle(u,c),e.perform(t,c),!0},touchend:function(t){n.progress(!1),e.end(t);var r=a.getTouches();s!=r.length&&(f=__.Element.getTransformStyle(u),r.forEach(function(e){e!=t.touch&&e.resetDelta()}),s=r.length)}};return __.Element.setTransformStyle(u,{}),n.maxNoOfTouches=2,n.captureOutside=!0,t.addMultiTouch(c,n),e.removeListeners=function(){c.removeListeners()},!1};t.exports=i},{"../basic":2}],19:[function(e,t,n){var r=e("../basic"),i=function(e,t,n){n.onlyPinch=!0;var i=r.relayGesture("transrotoscale",e,t,n);return i};t.exports=i},{"../basic":2}],21:[function(e,t,n){(function(e){(function(n){var r={include:function(e,t){return _.contains(e,t)||e.push(t),e},erase:function(e,t){var n=e.indexOf(t);return n>-1&&e.splice(n,1),e},isArray:Array.isArray||function(e){return e?typeof e=="object"&&Object.prototype.toString.call(e)=="[object Array]":!1},isObject:function(e){var t=typeof e;return!(!e||t!="function"&&t!="object")},last:function(e){return e[e.length-1]},contains:function(e,t){return e.indexOf(t)!=-1},forOwn:function(e,t){for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)},merge:function(e,t){r.forOwn(t,function(t,n){e[n]=t})},delay:function(e,t){return setTimeout(e,t)},clone:function(e){var t={};return r.merge(t,e),t}};t.exports=e._=r})(this)})(window)},{}],22:[function(e,t,n){(function(e){(function(e){"use strict";var t,n,r={},i=function(){},s="memory".split(","),o="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(",");while(t=s.pop())e[t]=e[t]||r;while(n=o.pop())e[n]=e[n]||i})(window.console=window.console||{}),window.Class=function(){var e=function(){this.initialize.apply(this,arguments)};return e},function(){var e=0,t=["webkit","moz","o","ms"];for(var n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,n){var r=(new Date).getTime(),i=Math.max(0,16-(r-e)),s=window.setTimeout(function(){t(r+i)},i);return e=r+i,s}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}();var n={Element:{},Math:{}};t.exports=e.__=n})(window)},{}],27:[function(e,t,n){var r=t.exports={};r.nextTick=function(){var e=typeof window!="undefined"&&window.setImmediate,t=typeof window!="undefined"&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(t){var n=[];return window.addEventListener("message",function(e){if(e.source===window&&e.data==="process-tick"){e.stopPropagation();if(n.length>0){var t=n.shift();t()}}},!0),function(t){n.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),r.title="browser",r.browser=!0,r.env={},r.argv=[],r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")}},{}],25:[function(e,t,n){(function(e){(function(){var n={},r=this,i=r.async;typeof t!="undefined"&&t.exports?t.exports=n:r.async=n,n.noConflict=function(){return r.async=i,n};var s=function(e,t){if(e.forEach)return e.forEach(t);for(var n=0;n<e.length;n+=1)t(e[n],n,e)},o=function(e,t){if(e.map)return e.map(t);var n=[];return s(e,function(e,r,i){n.push(t(e,r,i))}),n},u=function(e,t,n){return e.reduce?e.reduce(t,n):(s(e,function(e,r,i){n=t(n,e,r,i)}),n)},a=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t};typeof e=="undefined"||!e.nextTick?n.nextTick=function(e){setTimeout(e,0)}:n.nextTick=e.nextTick,n.forEach=function(e,t,n){n=n||function(){};if(!e.length)return n();var r=0;s(e,function(i){t(i,function(t){t?(n(t),n=function(){}):(r+=1,r===e.length&&n(null))})})},n.forEachSeries=function(e,t,n){n=n||function(){};if(!e.length)return n();var r=0,i=function(){t(e[r],function(t){t?(n(t),n=function(){}):(r+=1,r===e.length?n(null):i())})};i()},n.forEachLimit=function(e,t,n,r){r=r||function(){};if(!e.length||t<=0)return r();var i=0,s=0,o=0;(function u(){if(i===e.length)return r();while(o<t&&s<e.length)s+=1,o+=1,n(e[s-1],function(t){t?(r(t),r=function(){}):(i+=1,o-=1,i===e.length?r():u())})})()};var f=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[n.forEach].concat(t))}},l=function(e){return function(){var t=Array.prototype.slice.call(arguments);return e.apply(null,[n.forEachSeries].concat(t))}},c=function(e,t,n,r){var i=[];t=o(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){n(e.value,function(n,r){i[e.index]=r,t(n)})},function(e){r(e,i)})};n.map=f(c),n.mapSeries=l(c),n.reduce=function(e,t,r,i){n.forEachSeries(e,function(e,n){r(t,e,function(e,r){t=r,n(e)})},function(e){i(e,t)})},n.inject=n.reduce,n.foldl=n.reduce,n.reduceRight=function(e,t,r,i){var s=o(e,function(e){return e}).reverse();n.reduce(s,t,r,i)},n.foldr=n.reduceRight;var h=function(e,t,n,r){var i=[];t=o(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){n(e.value,function(n){n&&i.push(e),t()})},function(e){r(o(i.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};n.filter=f(h),n.filterSeries=l(h),n.select=n.filter,n.selectSeries=n.filterSeries;var p=function(e,t,n,r){var i=[];t=o(t,function(e,t){return{index:t,value:e}}),e(t,function(e,t){n(e.value,function(n){n||i.push(e),t()})},function(e){r(o(i.sort(function(e,t){return e.index-t.index}),function(e){return e.value}))})};n.reject=f(p),n.rejectSeries=l(p);var d=function(e,t,n,r){e(t,function(e,t){n(e,function(n){n?(r(e),r=function(){}):t()})},function(e){r()})};n.detect=f(d),n.detectSeries=l(d),n.some=function(e,t,r){n.forEach(e,function(e,n){t(e,function(e){e&&(r(!0),r=function(){}),n()})},function(e){r(!1)})},n.any=n.some,n.every=function(e,t,r){n.forEach(e,function(e,n){t(e,function(e){e||(r(!1),r=function(){}),n()})},function(e){r(!0)})},n.all=n.every,n.sortBy=function(e,t,r){n.map(e,function(e,n){t(e,function(t,r){t?n(t):n(null,{value:e,criteria:r})})},function(e,t){if(e)return r(e);var n=function(e,t){var n=e.criteria,r=t.criteria;return n<r?-1:n>r?1:0};r(null,o(t.sort(n),function(e){return e.value}))})},n.auto=function(e,t){t=t||function(){};var n=a(e);if(!n.length)return t(null);var r={},i=[],o=function(e){i.unshift(e)},f=function(e){for(var t=0;t<i.length;t+=1)if(i[t]===e){i.splice(t,1);return}},l=function(){s(i.slice(0),function(e){e()})};o(function(){a(r).length===n.length&&(t(null,r),t=function(){})}),s(n,function(n){var i=e[n]instanceof Function?[e[n]]:e[n],s=function(e){if(e)t(e),t=function(){};else{var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),r[n]=i,l()}},a=i.slice(0,Math.abs(i.length-1))||[],c=function(){return u(a,function(e,t){return e&&r.hasOwnProperty(t)},!0)&&!r.hasOwnProperty(n)};if(c())i[i.length-1](s,r);else{var h=function(){c()&&(f(h),i[i.length-1](s,r))};o(h)}})},n.waterfall=function(e,t){t=t||function(){};if(!e.length)return t();var r=function(e){return function(i){if(i)t(i),t=function(){};else{var s=Array.prototype.slice.call(arguments,1),o=e.next();o?s.push(r(o)):s.push(t),n.nextTick(function(){e.apply(null,s)})}}};r(n.iterator(e))()},n.parallel=function(e,t){t=t||function(){};if(e.constructor===Array)n.map(e,function(e,t){e&&e(function(e){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),t.call(null,e,n)})},t);else{var r={};n.forEach(a(e),function(t,n){e[t](function(e){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),r[t]=i,n(e)})},function(e){t(e,r)})}},n.series=function(e,t){t=t||function(){};if(e.constructor===Array)n.mapSeries(e,function(e,t){e&&e(function(e){var n=Array.prototype.slice.call(arguments,1);n.length<=1&&(n=n[0]),t.call(null,e,n)})},t);else{var r={};n.forEachSeries(a(e),function(t,n){e[t](function(e){var i=Array.prototype.slice.call(arguments,1);i.length<=1&&(i=i[0]),r[t]=i,n(e)})},function(e){t(e,r)})}},n.iterator=function(e){var t=function(n){var r=function(){return e.length&&e[n].apply(null,arguments),r.next()};return r.next=function(){return n<e.length-1?t(n+1):null},r};return t(0)},n.apply=function(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t.concat(Array.prototype.slice.call(arguments)))}};var v=function(e,t,n,r){var i=[];e(t,function(e,t){n(e,function(e,n){i=i.concat(n||[]),t(e)})},function(e){r(e,i)})};n.concat=f(v),n.concatSeries=l(v),n.whilst=function(e,t,r){e()?t(function(i){if(i)return r(i);n.whilst(e,t,r)}):r()},n.until=function(e,t,r){e()?r():t(function(i){if(i)return r(i);n.until(e,t,r)})},n.queue=function(e,t){var r=0,i={tasks:[],concurrency:t,saturated:null,empty:null,drain:null,push:function(e,r){e.constructor!==Array&&(e=[e]),s(e,function(e){i.tasks.push({data:e,callback:typeof r=="function"?r:null}),i.saturated&&i.tasks.length==t&&i.saturated(),n.nextTick(i.process)})},process:function(){if(r<i.concurrency&&i.tasks.length){var t=i.tasks.shift();i.empty&&i.tasks.length==0&&i.empty(),r+=1,e(t.data,function(){r-=1,t.callback&&t.callback.apply(t,arguments),i.drain&&i.tasks.length+r==0&&i.drain(),i.process()})}},length:function(){return i.tasks.length},running:function(){return r}};return i};var m=function(e){return function(t){var n=Array.prototype.slice.call(arguments,1);t.apply(null,n.concat([function(t){var n=Array.prototype.slice.call(arguments,1);typeof console!="undefined"&&(t?console.error&&console.error(t):console[e]&&s(n,function(t){console[e](t)}))}]))}};n.log=m("log"),n.dir=m("dir"),n.memoize=function(e,t){var n={},r={};t=t||function(e){return e};var i=function(){var i=Array.prototype.slice.call(arguments),s=i.pop(),o=t.apply(null,i);o in n?s.apply(null,n[o]):o in r?r[o].push(s):(r[o]=[s],e.apply(null,i.concat([function(){n[o]=arguments;var e=r[o];delete r[o];for(var t=0,i=e.length;t<i;t++)e[t].apply(null,arguments)}])))};return i.unmemoized=e,i},n.unmemoize=function(e){return function(){return(e.unmemoized||e).apply(null,arguments)}},window.async=n})()})(e("__browserify_process"))},{__browserify_process:27}],26:[function(e,t,n){window.Modernizr=function(){function l(e,t){return typeof e===t}function c(e,t){return!!~(""+e).indexOf(t)}function h(e,t){for(var r in e){var i=e[r];if(!c(i,"-")&&n[i]!==undefined)return t=="pfx"?i:!0}return!1}function p(e,t,n){for(var r in e){var i=t[e[r]];if(i!==undefined)return n===!1?e[r]:l(i,"function")?i.bind(n||t):i}return!1}function d(e,t,n){var r=e.charAt(0).toUpperCase()+e.slice(1),i=(e+" "+o.join(r+" ")+r).split(" ");return l(t,"string")||l(t,"undefined")?h(i,t):(i=(e+" "+u.join(r+" ")+r).split(" "),p(i,t,n))}var e="modernizr",t=document.createElement(e),n=t.style,r=" -webkit- -moz- -o- -ms- ".split(" "),i=document.documentElement,s="Webkit Moz O ms",o=s.split(" "),u=s.toLowerCase().split(" "),a={}.hasOwnProperty,f;!l(a,"undefined")&&!l(a.call,"undefined")?f=function(e,t){return a.call(e,t)}:f=function(e,t){return t in e&&l(e.constructor.prototype[t],"undefined")},injectElementWithStyles=function(t,n,r,s){var o,u,a,f,l=document.createElement("div"),c=document.body,h=c||document.createElement("body");if(parseInt(r,10))while(r--)a=document.createElement("div"),a.id=s?s[r]:e+(r+1),l.appendChild(a);return o=["&#173;",'<style id="s',e,'">',t,"</style>"].join(""),l.id=e,(c?l:h).innerHTML+=o,h.appendChild(l),c||(h.style.background="",h.style.overflow="hidden",f=i.style.overflow,i.style.overflow="hidden",i.appendChild(h)),u=n(l,t),c?l.parentNode.removeChild(l):(h.parentNode.removeChild(h),i.style.overflow=f),!!u};var v={};v.csstransforms=function(){return!!d("transform")},v.csstransforms3d=function(){var e=!!d("perspective");return e&&"webkitPerspective"in i.style&&injectElementWithStyles("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(t,n){e=t.offsetLeft===9&&t.offsetHeight===3}),e},v.draganddrop=function(){var e=document.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e},v.audio=function(){var e=document.createElement("audio"),t=!1;try{if(t=!!e.canPlayType)t=new Boolean(t),t.ogg=e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),t.mp3=e.canPlayType("audio/mpeg;").replace(/^no$/,""),t.wav=e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),t.m4a=(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,"")}catch(n){}return t},v.touch=function(){var t;return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch?t=!0:injectElementWithStyles(["@media (",r.join("touch-enabled),("),e,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(e){t=e.offsetTop===9}),t},v.csstransitions=function(){return d("transition")},v.pointerevents=function(){var e=document.createElement("x");return e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"};var m={};for(var g in v)f(v,g)&&(featureName=g.toLowerCase(),m[featureName]=v[g]());return m}()},{}],23:[function(e,t,n){var r=e("./basic"),i={isPointInPath:function(e,t){for(var n=!1,r=-1,i=t.length,s=i-1;++r<i;s=r)(t[r].y<=e.y&&e.y<t[s].y||t[s].y<=e.y&&e.y<t[r].y)&&e.x<(t[s].x-t[r].x)*(e.y-t[r].y)/(t[s].y-t[r].y)+t[r].x&&(n=!n);return n},getUUID:function(){var e=0;return function(){return(new Date).getTime()+"-"+ ++e}}(),RADIANT:Math.PI/180,RADIAN:180/Math.PI,toDegrees:function(e){return e*r.Math.RADIAN},toRadians:function(e){return e*r.Math.RADIANT},add_:function(e,t){return e.x+=t.x,e.y+=t.y,e},add:function(e,t){return{x:e.x+t.x,y:e.y+t.y}},estimateTriangle:function(e,t,n,i,s){var o=r.Math.delta(e,t),u=r.Math.delta(e,n),a=r.Math.delta(i,s),f=r.Math.getLength(a)/r.Math.getLength(o),l=r.Math.getSignedAngleBetween(o,a),c=r.Math.setLength(r.Math.rotate(a,r.Math.getSignedAngleBetween(o,u)),r.Math.getLength(u)*f),h=r.Math.add(i,c);return{center:h,scale:f,angle:l}},ccw:function(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)},intersectLineSegments:function(e,t,n,i){return r.Math.ccw(e,n,i)!=r.Math.ccw(t,n,i)&&r.Math.ccw(e,t,n)!=r.Math.ccw(e,t,i)},intersectPoly:function(e,t,n){for(var i=1;i<n.length;i++)if(r.Math.intersectLineSegments(e,t,n[i-1],n[i]))return!0;return!1},delta:function(e,t){return{x:t.x-e.x,y:t.y-e.y}},getLength:function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},setLength:function(e,t){var n=t/r.Math.getLength(e);return{x:e.x*n,y:e.y*n}},distance:function(e,t){return r.Math.getLength({x:t.x-e.x,y:t.y-e.y})},between:function(e,t,n){return n=n===undefined?.5:n,r.Math.add(e,r.Math.scale_(r.Math.delta(e,t),n))},limitTo:function(e,t,n){return Math.min(Math.max(e,t),n)},sgn:function(e){return e>0?1:e<0?-1:0},getDistance:function(e,t){return r.Math.getLength(r.Math.delta(e,t))},dot:function(e,t){return e.x*t.x+e.y*t.y},cross:function(e,t){return e.x*t.y-t.x*e.y},roundByN:function(e,t){return console.log("ROUNDBYN is depreciated, USE Math.roundBy instead"),r.Math.roundBy(e,t)},scale_:function(e,t){return t.x!==undefined?(e.x*=t.x,e.y*=t.y):(e.x*=t,e.y*=t),e},scale:function(e,t){return t.x!==undefined?{x:e.x*t.x,y:e.y*t.y}:{x:e.x*t,y:e.y*t}},getAngle:function(e){var t=Math.atan2(e.y,e.x);return t<0&&(t+=Math.PI*2),t},getSignedAngleBetween:function(e,t){var n=r.Math.getAngle(t)-r.Math.getAngle(e);return n>Math.PI?n-=2*Math.PI:n<=-Math.PI&&(n+=2*Math.PI),n},getAngleToX:function(e){return Math.atan2(e.y,e.x)},rotateAround:function(e,t,n){return r.Math.add(t,r.Math.rotate(r.Math.delta(t,e),n))},rotate:function(e,t){var n=Math.cos(t),r=Math.sin(t);return{x:n*e.x-r*e.y,y:r*e.x+n*e.y}},eps:function(e,t){return t=t||1e-4,Math.abs(e)<t?0:e}};r.Math=i,t.exports=i},{"./basic":22}],24:[function(e,t,n){var r=e("../dep/lodash.shim"),i=e("./basic"),s=e("./CSSMatrix.ext"),o=0,u=function(e){if(!e){console.trace(),console.log("INVALID ELEMENT FOR getIDToElement",e);return}var t=e.id;return t?t:(t="unique-id-"+o++,e.id=t,t)},a={globalEventData:{},DataStore:{},getId:u,innerSize:function(e,t){var n=a.retrieve(e,"_innerSize");if(!n||t){var r=a.size(e,t),s=parseFloat(i.Element.ccss(e,"paddingLeft"))+parseFloat(i.Element.ccss(e,"paddingRight")),o=parseFloat(i.Element.ccss(e,"paddingTop"))+parseFloat(i.Element.ccss(e,"paddingBottom")),u=parseFloat(i.Element.ccss(e,"borderLeft"))+parseFloat(i.Element.ccss(e,"borderRight")),f=parseFloat(i.Element.ccss(e,"borderTop"))+parseFloat(i.Element.ccss(e,"borderBottom"));n={innerWidth:r.offsetWidth-(s+u),innerHeight:r.offsetHeight-(o+f)},n.x=n.offsetWidth=n.innerWidth,n.y=n.offsetHeight=n.innerHeight,a.store(e,"_innerSize",n)}return n},size:function(e,t){var n=a.retrieve(e,"_size");if(!n||t)n={offsetWidth:e.offsetWidth,offsetHeight:e.offsetHeight},n.x=n.offsetWidth,n.y=n.offsetHeight,n.offsetLeft=e.offsetLeft,n.offsetTop=e.offsetTop,a.store(e,"_size",n);return n},parents:function(e){var t=[],n=e.parentNode,r=!1;while(n)t.push(n),r?n=!1:(n==document.body&&(r=!0),n=n.parentNode);return t},cachedParents:function(e,t){if(!e||!e.parentNode)return[];var n=e.parentNode,r=a.retrieve(e,"_parents");if(t||r===undefined||r.parent!=n)r={parents:a.parents(e),parent:n},a.store(e,"_parents",r);return r.parents.slice(0)},relativePosition:function(e){return a.position(e,!1,!0)},absolutePosition:function(e){return a.position(e,!1,!1)},position:function(e,t,n){if(n===undefined)return console.log("USE RELATIVEPOSITION OR ABSOLUTEPOSITION"),{x:0,y:0};var r={x:0,y:0},i=a.ccss(e,"position");t&&console.log(e.id,i,e.tagName,e.clientLeft,e.clientTop,parent.offsetLeft,e.offsetTop);if(i=="static")r.x+=e.clientLeft,r.y+=e.clientTop;else{var s=a.size(e);r.x+=s.offsetLeft,r.y+=s.offsetTop}return r},store:function(e,t,n){var r=u(e);a.DataStore[r]=a.DataStore[r]||{},a.DataStore[r][t]=n},retrieve:function(e,t,n){var r=u(e);a.DataStore[r]=a.DataStore[r]||{};var i=a.DataStore[r][t];return i===undefined&&(i=n,a.DataStore[r][t]=i),i},transformStyleKeys:function(){var e=document.createElement("transformTest").style,t={transform:{transform:"transform",transition:"transition",transitionDuration:"transitionDuration",transitionTiming:"transitionTimingFunction",transitionEnd:"transitionEnd",origin:"transformOrigin"},OTransform:{transform:"OTransform",transition:"OTransition",transitionDuration:"OTransitionDuration",transitionTiming:"OTransitionTimingFunction",transitionEnd:"oTransitionEnd",origin:"OTransformOrigin"},msTransform:{transform:"msTransform",transition:"msTransition",transitionDuration:"msTransitionDuration",transitionTiming:"msTransitionTimingFunction",transitionEnd:"msTransitionEnd",origin:"msTransformOrigin"},MozTransform:{transform:"MozTransform",transition:"MozTransition",transitionDuration:"MozTransitionDuration",transitionTiming:"MozTransitionTimingFunction",transitionEnd:"transitionEnd",origin:"MozTransformOrigin"},WebkitTransform:{transform:"webkitTransform",transition:"webkitTransition",transitionDuration:"webkitTransitionDuration",transitionTiming:"webkitTransitionTimingFunction",transitionEnd:"webkitTransitionEnd",origin:"webkitTransformOrigin"}};for(var n in t)if(e[n]!==undefined)return t[n];return console.log("PERFORMANCE WARNING,THIS BROWSER HAS NO KNOWN CSS3 TRANSFORM SUPPORT, WILL USE CSS2"),t.transform}(),getTransformStyleMatrix:function(e,t){var n=a.retrieve(e,"transformStyleMatrixDirty"),r;if(!e.transformsMatrix||n||t){var i=a.transformStyleKeys.transform;if(!i)return console.log("Browser-Engine does not support transform"),"";var s;return Modernizr.csstransforms&&(t?(console.warn("WARNING UNABLE TO USE CURRENT ON GETTRANSFORMSTYLEMATRIX"),console.trace(),s=a.css(e,i)):s=a.css(e,i),s=s||"none"),r=new window.CSSMatrix(s),a.store(e,"transformsMatrix",r),a.store(e,"transformStyleMatrixDirty",!1),r}return a.retrieve(e,"transformsMatrix")},getTransformStyleMatrixOrigin:function(e,t,n){n=!1;var r=a.retrieve(e,"transformsMatrixOrigin");if(t||a.retrieve(e,"transformStyleMatrixOriginDirty")||!r){var i=a.getTransformStyle(e),s=a.size(e),o={x:s.offsetWidth/2,y:s.offsetHeight/2},u=r?r.identity():new window.CSSMatrix;return u=u.translate(o.x,o.y,0),u=u.translate(i.translateX,i.translateY,0),u=u.rotateAxisAngle(0,0,1,i.rotateZ),u=u.scale(i.scaleX,i.scaleY,1),u=u.translate(-o.x,-o.y,0),a.store(e,"transformsMatrixOrigin",u),a.store(e,"transformStyleMatrixOriginDirty",!1),u}return r},getNestedTransformStyleMatrix:function(e,t,n){var r=new window.CSSMatrix,i=a.cachedParents(e).reverse().slice(2).concat(e);for(var s=0;s<i.length;s++){var o=i[s],u=a.getTransformStyleMatrixOrigin(o,t);if(n){var f=a.size(o);if(a.ccss(o,"position")=="static"){var l=(new window.CSSMatrix).translate(-f.offsetLeft,-f.offsetTop,0);u=l.multiply(u)}var c=(new window.CSSMatrix).translate(f.offsetLeft,f.offsetTop,0);u=c.multiply(u)}var h=parseFloat(a.ccss(o,"border-left")||0),p=parseFloat(a.ccss(o,"border-top")||0),d=(new window.CSSMatrix).translate(h,p,0);r=r.multiply(u),r=r.multiply(d)}return r},getTransformStyle:function(e,t){var n=a.retrieve(e,"transforms");if(!n||t){var r=a.getTransformStyleMatrix(e,t),i=n?n.origin:!1;n=window.CSSMatrix.unmatrix(r),n.origin=i,a.store(e,"transforms",n)}return n},updateTransitions:function(e){var t=a.retrieve(e,"transitions",{}),n=[];r.forOwn(t,function(e){n.push(e.what+" "+e.duration+"ms "+e.timing)});var i=n.join(",");a.setTransitionProperty(e,i)},addTransition:function(e,t,n,r){t=t||all,n=n!==undefined?n:150,r=r||"linear";var i=a.retrieve(e,"transitions",{});i[t]=i[t]||{},i[t].duration=n,i[t].timing=r,i[t].what=t,a.updateTransitions(e)},getTransitions:function(e){return a.retrieve(e,"transitions",{})},getTransitionProperty:function(e){return a.css(e,a.transformStyleKeys.transition)||"none"},setTransitionProperty:function(e,t){return a.css(e,a.transformStyleKeys.transition,t),e},setTransition:function(e,t,n,r){return a.retrieve(e,"transitions",{}),a.addTransition(e,t,n,r)},setTransitionTiming:function(e,t,n){var r=a.getTransitions(e)[t];return r?r.transition!=n&&(r.transition=n,a.updateTransitions(e)):t=="all"?a.addTransition(e,t,0,n):(console.trace(),console.log(t,"IS NOT A REGISTERED TRANSITION")),e},setTransitionDuration:function(e,t,n){var r=a.getTransitions(e)[t];r?r.duration!=n&&(r.duration=n,a.updateTransitions(e)):t=="all"?a.addTransition(e,t,n):(console.trace(),console.log(t,"IS NOT A REGISTERED TRANSITION"))},resetTransformStyle:function(e){return a.setTransformStyle(e,{translateX:0,translateY:0,translateZ:0,scaleX:1,scaleY:1,scaleZ:1,rotateX:0,rotateY:0,rotateZ:0,skewX:0,skewY:0,skewZ:0}),e},setTransformStyle:function(e,t,n,r){if(!e)return;if(!t)return;var i=a.retrieve(e,"transforms")||a.getTransformStyle(e);a.store(e,"transformStyleMatrixDirty",!0),a.store(e,"transformStyleMatrixOriginDirty",!0);if(t.x!==undefined||t.y!==undefined||t.z!==undefined)console.trace(),console.log("SET TRANSFORM STYLE,x,y,z IS DEPRECTAED"),t.translateX=t.x,t.translateY=t.y,t.translateZ=t.z;t.scale&&(t.scaleX=t.scaleY=t.scale,delete t.scale);var o=1e3;t.translateX=t.translateX!==undefined?~~(t.translateX*o)/o:i.translateX,t.translateY=t.translateY!==undefined?~~(t.translateY*o)/o:i.translateY,t.translateZ=t.translateZ!==undefined?~~(t.translateZ*o)/o:i.translateZ,t.rotateX=t.rotateX!==undefined?~~(t.rotateX*o)/o:i.rotateX,t.rotateY=t.rotateY!==undefined?~~(t.rotateY*o)/o:i.rotateY,t.rotateZ=t.rotateZ!==undefined?~~(t.rotateZ*o)/o:i.rotateZ,t.scaleX=t.scaleX!==undefined?~~(t.scaleX*o)/o:i.scaleX,t.scaleY=t.scaleY!==undefined?~~(t.scaleY*o)/o:i.scaleY,t.scaleZ=t.scaleZ!==undefined?~~(t.scaleZ*o)/o:i.scaleZ,t.skewX=t.skewX!==undefined?~~(t.skewX*o)/o:i.skewX,t.skewY=t.skewY!==undefined?~~(t.skewY*o)/o:i.skewY,t.skewZ=t.skewZ!==undefined?~~(t.skewZ*o)/o:i.skewZ,t.origin||i.origin&&(t.origin=i.origin);var u=!Modernizr.csstransforms3d&&!Modernizr.csstransforms,f,l=a.transformStyleKeys;if(l){if(Modernizr.csstransforms3d||l.transform=="webkitTransform")t.rotateAfter?f="rotateX("+t.rotateX+"deg) rotateY("+t.rotateY+"deg) rotateZ("+t.rotateZ+"deg) translate3d("+t.translateX+"px,"+t.translateY+"px,"+t.translateZ+"px) scaleX("+t.scaleX+") scaleY("+t.scaleY+") scaleZ("+t.scaleZ+")":f="translate3d("+t.translateX+"px,"+t.translateY+"px,"+t.translateZ+"px) rotateX("+t.rotateX+"deg) rotateY("+t.rotateY+"deg) rotateZ("+t.rotateZ+"deg) scaleX("+t.scaleX+") scaleY("+t.scaleY+") scaleZ("+t.scaleZ+")",a.css(e,l.transform,f);else if(Modernizr.csstransforms)t.rotateAfter?f="rotate("+t.rotateZ+"deg) translate("+t.translateX+"px,"+t.translateY+"px) scale("+t.scaleX+","+t.scaleY+")":f="translate("+t.translateX+"px,"+t.translateY+"px) rotate("+t.rotateZ+"deg) scale("+t.scaleX+","+t.scaleY+")",a.css(e,l.transform,f);else{if(u){var c=new s("translate3d("+t.translateX+"px,"+t.translateY+"px,"+t.translateZ+"px) rotateX("+t.rotateX+"deg) rotateY("+t.rotateY+"deg) rotateZ("+ -t.rotateZ+"deg) scaleX("+t.scaleX+") scaleY("+t.scaleY+") scaleZ("+t.scaleZ+")"),h=typeof e.filters!==undefined;h?(e.filters.item("DXImageTransform.Microsoft.Matrix")&&(e.style.msFilter=e.style.filter=(e.style.filter?"":" ")+"progid:DXImageTransform.Microsoft.Matrix(sizingMethod='auto expand')"),e.filters.item("DXImageTransform.Microsoft.Matrix").M11=c.m11,e.filters.item("DXImageTransform.Microsoft.Matrix").M12=c.m12,e.filters.item("DXImageTransform.Microsoft.Matrix").M21=c.m21,e.filters.item("DXImageTransform.Microsoft.Matrix").M22=c.m22):console.log("EROR WITH IE DXIMAGETRANSFORM FILTERS"),e.style.marginLeft=-(e.offsetWidth/2)+e.clientWidth/2+"px",e.style.marginTop=-(e.offsetHeight/2)+e.clientHeight/2+"px"}a.css(e,{left:t.translateX,top:t.translateY})}t.origin&&a.css(e,l.origin,t.origin.x+"px "+t.origin.y+"px")}else a.css(e,{left:t.translatX,top:t.translateY});a.store(e,"transforms",t),n=!0,!n&&elem.particle&&elem.particle.onExternalUpdate(t)},getNestedCenter:function(e,t){var n=a.getNestedCorners(e,t);return i.Math.between(n[0],n[2],.5)},getNestedCorners:function(e,t,n){n=n||0;var r=a.getNestedTransformStyle(e),s=a.size(e),o={x:s.offsetWidth*r.scaleX,y:s.offsetHeight*r.scaleY},u={x:r.translateX+.5*o.x/r.scaleX,y:r.translateY+.5*o.y/r.scaleY},f=i.Math.add(u,i.Math.rotate({x:-o.x*.5-n,y:-o.y*.5-n},r.rotateZ/180*Math.PI)),l=i.Math.add(u,i.Math.rotate({x:o.x*.5+n,y:-o.y*.5-n},r.rotateZ/180*Math.PI)),c=i.Math.add(u,i.Math.rotate({x:-o.x*.5-n,y:o.y*.5+n},r.rotateZ/180*Math.PI)),h=i.Math.add(u,i.Math.rotate({x:o.x*.5+n,y:o.y*.5+n},r.rotateZ/180*Math.PI));return[f,l,h,c]},getNestedTransformStyle:function(e,t,n){var r=a.getNestedTransformStyleMatrix(e,t,n);return window.CSSMatrix.unmatrix(r)},addListener:function(e,t,n){if(e.addEventListener)e.addEventListener(t,n);else if(e.attachEvent)if(e.dispatchEvent||t.toLowerCase().indexOf("mouse")===0)e.attachEvent("on"+t,n);else{var r=u(e),s=!1;i.Element.globalEventData[t]&&i.Element.globalEventData[t][r]&&(s=!0);if(!s){e[t]=0,i.Element.globalEventData[t]=i.Element.globalEventData[t]||{},i.Element.globalEventData[t][r]={callbacks:[],data:[]};var o=i.Element.globalEventData[t][r].callbacks,a=function(e){if(e.propertyName==t){var n=!1,s=0;o.forEach(function(e){i.Element.globalEventData[t][r].data.forEach(function(t){e(t)})}),i.Element.globalEventData[t][r].data=[]}};e.attachEvent("onpropertychange",a)}i.Element.globalEventData[t][r].callbacks.push(n)}else console.log("UNABLE TO BIND EVENT");return e},removeListener:function(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n);else if(e.detachEvent)if(e.dispatchEvent||t.toLowerCase().indexOf("mouse")===0)e.detachEvent("on"+t,n);else{var s=u(e);i.Element.globalEventData[t]=i.Element.globalEventData[t]||{};if(i.Element.globalEventData[t][s]){var o=i.Element.globalEventData[t][s];r.erase(i.Element.globalEventData[t][s].callbacks,n)}}else console.log("UNABLE TO BIND EVENT");return e},ccss:function(e,t){if(!e||!e.parentNode)return console.trace(),console.log("Element.ccs",e,"IS INVALID OR NOT INSIDE DOM"),"";var n=window.getComputedStyle!==undefined?window.getComputedStyle(e):e.currentStyle;if(!n)return console.log("ERROR RETRIEVING",e.parentNode,e.currentStyle),"";t=t.replace(/-(\w)/g,function(e,t){return t.toUpperCase()});var r=n[t];return r},css:function(e,t,n){if(!e||!e.style)console.trace(),console.log("WRONG ELEMENT",e);if(arguments.length==2){if(!r.isObject(t))return e.style[t];r.forOwn(t,function(t,n){e.style[n]=t})}if(arguments.length==3)return e.style[t]=n}};i.Element=a,t.exports=a},{"../dep/lodash.shim":7,"./basic":22,"./CSSMatrix.ext":28}],28:[function(e,t,n){(function(n){var r=e("./basic"),i=n.CSSMatrix||e("./CSSMatrixStripped"),s=function(e){return new o(e)},o=function(e){return this.elements=e,this},u=function(e){return new a(e)},a=function(e){return this.elements=e,this};a.Zero=function(e){var t=[];do t.push(0);while(--e);return new a(t)},a.prototype={modulus:function(){return Math.sqrt(this.dot(this))},dot:function(e){var t=e.elements||e,n,r=0,i=this.elements.length;if(i!=t.length)return null;do r+=this.elements[i-1]*t[i-1];while(--i);return r},toUnitVector:function(){var e=this.modulus();return e===0?this.dup():this.map(function(t){return t/e})},dup:function(){return new a(this.elements)},map:function(e){var t=[];return this.elements.forEach(function(n,r){t.push(e(n,r))}),new a(t)},cross:function(e){var t=e.elements||e;if(this.elements.length!=3||t.length!=3)return null;var n=this.elements;return new a([n[1]*t[2]-n[2]*t[1],n[2]*t[0]-n[0]*t[2],n[0]*t[1]-n[1]*t[0]])}};var f=!1;if(window.WebKitCSSMatrix){var l=navigator.userAgent;if(l.indexOf("Android")>=0){var c=parseFloat(l.slice(l.indexOf("Android")+8));c<3&&(f=!0)}}var h=window.WebKitCSSMatrix&&!f;i=h?window.WebKitCSSMatrix:i,i.isNative=h,i.prototype.identity=function(){return this.m11=this.m22=this.m33=this.m44=1,this.m12=this.m13=this.m14=this.m21=this.m23=this.m24=this.m31=this.m32=this.m34=this.m41=this.m42=this.m43=0,this},i.prototype.multPoint=function(e,t,n,r){var i=this.m13===0&&this.m14===0&&this.m23===0&&this.m24===0&&this.m31===0&&this.m32===0&&this.m33===1&&this.m34===0&&this.m43===0&&this.m44===1;return i?(n=1,this.isNative?{x:this.a*e+this.c*t+this.e*n,y:this.b*e+this.d*t+this.f*n,z:0}:{x:this.m11*e+this.m21*t+this.m41*n,y:this.m12*e+this.m22*t+this.m42*n,z:0}):(n=n||0,r=r===undefined?1:r,{x:this.m11*e+this.m12*t+this.m13*n+this.m14*r,y:this.m21*e+this.m22*t+this.m23*n+this.m24*r,z:this.m31*e+this.m32*t+this.m33*n+this.m34*r,w:this.m41*e+this.m42*t+this.m43*n+this.m44*r})};var p=function(e,t,n,r){var i=u([n*e.elements[0]+r*t.elements[0],n*e.elements[1]+r*t.elements[1],n*e.elements[2]+r*t.elements[2]]);return i};i.unmatrix=function(e){var t;if(e.m11!==undefined)t=s([[e.m11,e.m12,e.m13,e.m14],[e.m21,e.m22,e.m23,e.m24],[e.m31,e.m32,e.m33,e.m34],[e.m41,e.m42,e.m43,e.m44]]);else{if(e.a===undefined)return!1;t=s([[e.a,e.b,0,0],[e.c,e.d,0,0],[0,0,1,0],[e.e,e.f,0,1]])}t.elements[3][3]=r.Math.eps(t.elements[3][3],1e-4);if(t.elements[3][3]===0)return!1;for(v=0;v<4;v++)for(j=0;j<4;j++)t.elements[v][j]=r.Math.eps(t.elements[v][j]/t.elements[3][3]);var n=t;for(v=0;v<3;v++)n.elements[v][3]=0;n.elements[3][3]=1;var i=a.Zero(4),o=a.Zero(3),f=a.Zero(3),l=a.Zero(3),c=a.Zero(3);t.elements[0][3]===0&&t.elements[1][3]===0&&t.elements[2][3]===0&&(i.elements[0]=i.elements[1]=i.elements[2]=0,i.elements[3]=1);for(v=0;v<3;v++)o.elements[v]=t.elements[3][v];var h=[];for(v=0;v<3;v++)h[v]=u([t.elements[v][0],t.elements[v][1],t.elements[v][2]]);l.elements[0]=h[0].modulus(),h[0]=h[0].toUnitVector(),c.elements[0]=h[0].dot(h[1]),h[1]=p(h[1],h[0],1,-c.elements[0]),l.elements[1]=h[1].modulus(),h[1]=h[1].toUnitVector(),c.elements[0]/=l.elements[1],c.elements[1]=h[0].dot(h[2]),h[2]=p(h[2],h[0],1,-c.elements[1]),c.elements[2]=h[1].dot(h[2]),h[2]=p(h[2],h[1],1,-c.elements[2]),l.elements[2]=h[2].modulus(),h[2]=h[2].toUnitVector(),c.elements[1]/=l.elements[2],c.elements[2]/=l.elements[2];var d=h[1].cross(h[2]);if(h[0].dot(d)<0)for(v=0;v<3;v++)l.elements[0]*=-1,h[v].elements[0]*=-1,h[v].elements[1]*=-1,h[v].elements[2]*=-1;f.elements[1]=Math.asin(-h[0].elements[2]),Math.cos(f.elements[1])!==0?(f.elements[0]=Math.atan2(h[1].elements[2],h[2].elements[2]),f.elements[2]=Math.atan2(h[0].elements[1],h[0].elements[0])):(f.elements[0]=Math.atan2(h[1].elements[0],h[1].elements[1]),f.elements[2]=0);for(var v=0;v<3;v++)f.elements[v]=f.elements[v]/Math.PI*180;var m={translateX:r.Math.eps(o.elements[0]),translateY:r.Math.eps(o.elements[1]),translateZ:r.Math.eps(o.elements[2]),rotateX:r.Math.eps(f.elements[0]),rotateY:r.Math.eps(f.elements[1]),rotateZ:r.Math.eps(f.elements[2]),scaleX:r.Math.eps(l.elements[0]),scaleY:r.Math.eps(l.elements[1]),scaleZ:r.Math.eps(l.elements[2]),skewX:r.Math.eps(c.elements[0]),skewY:r.Math.eps(c.elements[1]),skewZ:r.Math.eps(c.elements[2])};return m},n.CSSMatrix=i,t.exports=i})(window)},{"./basic":22,"./CSSMatrixStripped":29}],29:[function(e,t,n){var r=function(e,t,n){var r=e.indexOf(t);if(r>-1){var i=e.indexOf(n,r);if(i)return e.substring(r+t.length,i)}return undefined},i=function(e){this.m11=this.m22=this.m33=this.m44=1,this.m12=this.m13=this.m14=this.m21=this.m23=this.m24=this.m31=this.m32=this.m34=this.m41=this.m42=this.m43=0,typeof e=="string"&&e!="none"&&this.setMatrixValue(e)};i.displayName="CSSMatrix",i.degreesToRadians=function(e){return e*Math.PI/180},i.determinant2x2=function(e,t,n,r){return e*r-t*n},i.determinant3x3=function(e,t,n,r,s,o,u,a,f){var l=i.determinant2x2;return e*l(s,o,a,f)-r*l(t,n,a,f)+u*l(t,n,s,o)},i.determinant4x4=function(e){var t=i.determinant3x3,n=e.m11,r=e.m21,s=e.m31,o=e.m41,u=e.m12,a=e.m22,f=e.m32,l=e.m42,c=e.m13,h=e.m23,p=e.m33,d=e.m43,v=e.m14,m=e.m24,g=e.m34,y=e.m44;return n*t(a,h,m,f,p,g,l,d,y)-r*t(u,c,v,f,p,g,l,d,y)+s*t(u,c,v,a,h,m,l,d,y)-o*t(u,c,v,a,h,m,f,p,g)};var s=!1;[["m11","a"],["m12","b"],["m21","c"],["m22","d"],["m41","e"],["m42","f"]].forEach(function(e){if(s)return;var t=e[0],n=e[1];try{Object.defineProperty(i.prototype,n,{set:function(e){this[t]=e},get:function(){return this[t]}})}catch(r){s=!0,console.log("CSSMATRIX SUPPORT INCOMPLETE, AVOID CSSMATRIX.[A,B,C,D,E,F] ACCESS")}}),i.prototype.isAffine=function(){return this.m13===0&&this.m14===0&&this.m23===0&&this.m24===0&&this.m31===0&&this.m32===0&&this.m33===1&&this.m34===0&&this.m43===0&&this.m44===1},i.prototype.multiply=function(e){var t=e,n=this,r=new i;return r.m11=t.m11*n.m11+t.m12*n.m21+t.m13*n.m31+t.m14*n.m41,r.m12=t.m11*n.m12+t.m12*n.m22+t.m13*n.m32+t.m14*n.m42,r.m13=t.m11*n.m13+t.m12*n.m23+t.m13*n.m33+t.m14*n.m43,r.m14=t.m11*n.m14+t.m12*n.m24+t.m13*n.m34+t.m14*n.m44,r.m21=t.m21*n.m11+t.m22*n.m21+t.m23*n.m31+t.m24*n.m41,r.m22=t.m21*n.m12+t.m22*n.m22+t.m23*n.m32+t.m24*n.m42,r.m23=t.m21*n.m13+t.m22*n.m23+t.m23*n.m33+t.m24*n.m43,r.m24=t.m21*n.m14+t.m22*n.m24+t.m23*n.m34+t.m24*n.m44,r.m31=t.m31*n.m11+t.m32*n.m21+t.m33*n.m31+t.m34*n.m41,r.m32=t.m31*n.m12+t.m32*n.m22+t.m33*n.m32+t.m34*n.m42,r.m33=t.m31*n.m13+t.m32*n.m23+t.m33*n.m33+t.m34*n.m43,r.m34=t.m31*n.m14+t.m32*n.m24+t.m33*n.m34+t.m34*n.m44,r.m41=t.m41*n.m11+t.m42*n.m21+t.m43*n.m31+t.m44*n.m41,r.m42=t.m41*n.m12+t.m42*n.m22+t.m43*n.m32+t.m44*n.m42,r.m43=t.m41*n.m13+t.m42*n.m23+t.m43*n.m33+t.m44*n.m43,r.m44=t.m41*n.m14+t.m42*n.m24+t.m43*n.m34+t.m44*n.m44,r},i.prototype.isIdentityOrTranslation=function(){var e=this;return e.m11===1&&e.m12===0&&e.m13===0&&e.m14===0&&e.m21===0&&e.m22===1&&e.m23===0&&e.m24===0&&e.m31===0&&e.m31===0&&e.m33===1&&e.m34===0&&e.m44===1},i.prototype.adjoint=function(){var e=new i,t=this,n=i.determinant3x3,r=t.m11,s=t.m12,o=t.m13,u=t.m14,a=t.m21,f=t.m22,l=t.m23,c=t.m24,h=t.m31,p=t.m32,d=t.m33,v=t.m34,m=t.m41,g=t.m42,y=t.m43,b=t.m44;return e.m11=n(f,p,g,l,d,y,c,v,b),e.m21=-n(a,h,m,l,d,y,c,v,b),e.m31=n(a,h,m,f,p,g,c,v,b),e.m41=-n(a,h,m,f,p,g,l,d,y),e.m12=-n(s,p,g,o,d,y,u,v,b),e.m22=n(r,h,m,o,d,y,u,v,b),e.m32=-n(r,h,m,s,p,g,u,v,b),e.m42=n(r,h,m,s,p,g,o,d,y),e.m13=n(s,f,g,o,l,y,u,c,b),e.m23=-n(r,a,m,o,l,y,u,c,b),e.m33=n(r,a,m,s,f,g,u,c,b),e.m43=-n(r,a,m,s,f,g,o,l,y),e.m14=-n(s,f,p,o,l,d,u,c,v),e.m24=n(r,a,h,o,l,d,u,c,v),e.m34=-n(r,a,h,s,f,p,u,c,v),e.m44=n(r,a,h,s,f,p,o,l,d),e},i.prototype.inverse=function(){var e,t,n,r,s;if(this.isIdentityOrTranslation()){e=new i;if(this.m41!==0||this.m42!==0||this.m43!==0)e.m41=-this.m41,e.m42=-this.m42,e.m43=-this.m43;return e}n=this.adjoint(),t=i.determinant4x4(this);if(Math.abs(t)<1e-8)return null;for(r=1;r<5;r++)for(s=1;s<5;s++)n["m"+r+s]/=t;return n},i.prototype.rotate=function(e,t,n){var r=i.degreesToRadians;if(typeof e!="number"||isNaN(e))e=0;(typeof t!="number"||isNaN(t))&&(typeof n!="number"||isNaN(n))&&(n=e,e=0,t=0);if(typeof t!="number"||isNaN(t))t=0;if(typeof n!="number"||isNaN(n))n=0;e=r(e),t=r(t),n=r(n);var s=new i,o=new i,u=new i,a,f,l;return n/=2,a=Math.sin(n),f=Math.cos(n),l=a*a,u.m11=u.m22=1-2*l,u.m12=u.m21=2*a*f,u.m21*=-1,t/=2,a=Math.sin(t),f=Math.cos(t),l=a*a,o.m11=o.m33=1-2*l,o.m13=o.m31=2*a*f,o.m13*=-1,e/=2,a=Math.sin(e),f=Math.cos(e),l=a*a,s.m22=s.m33=1-2*l,s.m23=s.m32=2*a*f,s.m32*=-1,u.multiply(o).multiply(s).multiply(this)},i.prototype.rotateAxisAngle=function(e,t,n,r){if(typeof e!="number"||isNaN(e))e=0;if(typeof t!="number"||isNaN(t))t=0;if(typeof n!="number"||isNaN(n))n=0;if(typeof r!="number"||isNaN(r))r=0;e===0&&t===0&&n===0&&(n=1);var s=new i,o=Math.sqrt(e*e+t*t+n*n),u,a,f,l,c,h,p;return r=(i.degreesToRadians(r)||0)/2,u=Math.cos(r),a=Math.sin(r),f=a*a,o===0?(e=0,t=0,n=1):o!==1&&(e/=o,t/=o,n/=o),e===1&&t===0&&n===0?(s.m22=s.m33=1-2*f,s.m23=s.m32=2*u*a,s.m32*=-1):e===0&&t===1&&n===0?(s.m11=s.m33=1-2*f,s.m13=s.m31=2*u*a,s.m13*=-1):e===0&&t===0&&n===1?(s.m11=s.m22=1-2*f,s.m12=s.m21=2*u*a,s.m21*=-1):(l=a*u,c=e*e,h=t*t,p=n*n,s.m11=1-2*(h+p)*f,s.m12=2*(e*t*f+n*l),s.m13=2*(e*n*f-t*l),s.m21=2*(t*e*f-n*l),s.m22=1-2*(p+c)*f,s.m23=2*(t*n*f+e*l),s.m31=2*(n*e*f+t*l),s.m32=2*(n*t*f-e*l),s.m33=1-2*(c+h)*f),this.multiply(s)},i.prototype.scale=function(e,t,n){var r=new i;if(typeof e!="number"||isNaN(e))e=1;if(typeof t!="number"||isNaN(t))t=e;if(typeof n!="number"||isNaN(n))n=1;return r.m11=e,r.m22=t,r.m33=n,this.multiply(r)},i.prototype.translate=function(e,t,n){var r=new i;if(typeof e!="number"||isNaN(e))e=0;if(typeof t!="number"||isNaN(t))t=0;if(typeof n!="number"||isNaN(n))n=0;return r.m41=e,r.m42=t,r.m43=n,this.multiply(r)},i.prototype.setMatrixValue=function(e){e=e.trim();var t=e.match(/^matrix(3d)?\(\s*(.+)\s*\)$/),n,s,o,u,a,f;if(!t){var l=new i,c=e.replace(/, /g,",").split(" ");c.forEach(function(e){var t;if(e.indexOf("translate(")>-1){var n=r(e,"translate(",")").split(",").map(function(e){return parseInt(e,10)});n.length>0&&(l=l.translate(n[0],n[1],n[2]))}if(e.indexOf("translate3d(")>-1){var i=r(e,"translate3d(",")").split(",").map(function(e){return parseInt(e,10)});i.length>0&&(l=l.translate(i[0],i[1],i[2]))}if(e.indexOf("rotate")>-1)if(e.indexOf("rotate(")>-1){var s=r(e,"rotate(",")").split(",").map(function(e){return parseInt(e,10)});s.length>0&&(l=l.rotateAxisAngle(0,0,1,s[2]),l=l.rotateAxisAngle(0,1,0,s[1]),l=l.rotateAxisAngle(1,0,0,s[0]))}else{var o={X:0,Y:0,Z:0};"X,Y,Z".split(",").forEach(function(t){var n=r(e,"rotate"+t+"(",")");n&&(o[t]=parseFloat(n))}),l=l.rotateAxisAngle(0,0,1,o.Z),l=l.rotateAxisAngle(0,1,0,o.Y),l=l.rotateAxisAngle(1,0,0,o.X)}if(e.indexOf("scale")>-1)if(e.indexOf("scale(")>-1)t=r(e,"scale(",")").split(",").map(function(e){return parseFloat(e,10)}),t.length>0&&(l=l.scale(t[0],t[1],t[2]));else{var u={X:1,Y:1,Z:1};"X,Y,Z".split(",").forEach(function(t){var n=r(e,"scale"+t+"(",")");n&&(u[t]=parseFloat(n))}),l=l.scale(u.X,u.Y,u.Z)}}.bind(this)),this.setMatrixValue(l.toString());return}n=!!t[1],s=t[2].split(/\s*,\s*/),o=s.length,u=new Array(o);if(n&&o!==16||!n&&o!==6)return;for(a=0;a<o;a++){f=s[a];if(!f.match(/^-?\d+(\.\d+)?$/))return;u[a]=parseFloat(f)}if(n)for(a=0;a<o;a++)this["m"+(Math.floor(a/4)+1)+(a%4+1)]=u[a];else o==6&&(this.m11=u[0],this.m12=u[1],this.m13=this.m14=0,this.m21=u[2],this.m22=u[3],this.m23=this.m24=0,this.m31=this.m32=this.m34=0,this.m33=1,this.m41=u[4],this.m42=u[5],this.m43=0,this.m44=1)},i.prototype.toString=function(){var e=this,t,n;return this.isAffine()?(n="matrix(",t=["m11","m12","m21","m22","m41","m42"]):(n="matrix3d(",t=["m11","m12","m13","m14","m21","m22","m23","m24","m31","m32","m33","m34","m41","m42","m43","m44"]),n+t.map(function(t){return e[t].toFixed(6)}).join(", ")+")"},t.exports=i},{}]},{},[1])